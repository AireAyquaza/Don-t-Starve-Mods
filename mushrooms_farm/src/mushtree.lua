-- Strings
GLOBAL.STRINGS.CHARACTERS.GENERIC.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "That mushroom got too big for its own good.",
	BLOOM = "You can't tell from far away, but it's quite smelly.",
}
GLOBAL.STRINGS.CHARACTERS.GENERIC.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "These used to grow in my bathroom.",
	BLOOM = "I'm mildly offended by this.",
}
GLOBAL.STRINGS.CHARACTERS.GENERIC.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "A magic mushroom?",
	BLOOM = "It's trying to reproduce.",
}
GLOBAL.STRINGS.CHARACTERS.WAXWELL.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "It smells of rot and failure.",
	BLOOM = "It's spawning.",
}
GLOBAL.STRINGS.CHARACTERS.WAXWELL.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "Where's Waldo?",
	BLOOM = "I hope I'm not standing next to it when it goes off.",
}
GLOBAL.STRINGS.CHARACTERS.WAXWELL.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Ugh, it smells bad.",
	BLOOM = "Oh fine, do what you like.",
}
GLOBAL.STRINGS.CHARACTERS.WALANI.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "That's a whole lot of mushtree!",
	BLOOM = "It'll make more!",
}
GLOBAL.STRINGS.CHARACTERS.WALANI.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "Medium mushness.",
	BLOOM = "It'll make more!",
}
GLOBAL.STRINGS.CHARACTERS.WALANI.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Grow tree! Mush! Mush!",
	BLOOM = "It'll make more!",
}
GLOBAL.STRINGS.CHARACTERS.WARLY.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "Oh, divine tree of mushrooms... what else can you teach me?",
	BLOOM = "Make me more 'shroom!",
}
GLOBAL.STRINGS.CHARACTERS.WARLY.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "I have seen the light. Mushrooms do indeed grow on trees.",
	BLOOM = "Make me more 'shroom!",
}
GLOBAL.STRINGS.CHARACTERS.WARLY.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Surely mushrooms do not grow on trees here?",
	BLOOM = "Make me more 'shroom!",
}
GLOBAL.STRINGS.CHARACTERS.WATHGRITHR.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "What magic is this?",
	BLOOM = "An enthusiastic performance!",
}
GLOBAL.STRINGS.CHARACTERS.WATHGRITHR.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "I do like its glow.",
	BLOOM = "What a great effect!",
}
GLOBAL.STRINGS.CHARACTERS.WATHGRITHR.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "I don't care for mushrooms.",
	BLOOM = "I'll fight alongside you any day!",
}
GLOBAL.STRINGS.CHARACTERS.WEBBER.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "How did it get so big?",
	BLOOM = "It sounds so funny!",
}
GLOBAL.STRINGS.CHARACTERS.WEBBER.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "It's upsettingly large.",
	BLOOM = "Hahah! Wow, it smells so bad!",
}
GLOBAL.STRINGS.CHARACTERS.WEBBER.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Bigger than a normal mushroom.",
	BLOOM = "It's all round and squishy now!",
}
GLOBAL.STRINGS.CHARACTERS.WENDY.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "These are some strange trees.",
	BLOOM = "It's trying so hard. Why?",
}
GLOBAL.STRINGS.CHARACTERS.WENDY.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "It looks like a rotting hat.",
	BLOOM = "All its efforts fall on rocky soil.",
}
GLOBAL.STRINGS.CHARACTERS.WENDY.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Do little gnomes live in these?",
	BLOOM = "It has a glowing presence.",
}
GLOBAL.STRINGS.CHARACTERS.WICKERBOTTOM.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "A tree with a fungal parasite.",
	BLOOM = "Apparently it's the breeding season for this species.",
}
GLOBAL.STRINGS.CHARACTERS.WICKERBOTTOM.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "A red variety of Mycena luxaeterna.",
	BLOOM = "The smell is used to ward off predators.",
}
GLOBAL.STRINGS.CHARACTERS.WICKERBOTTOM.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "My word! A huge Mycena silvaelucens.",
	BLOOM = "The light is caused by a chemical reaction.",
}
GLOBAL.STRINGS.CHARACTERS.WILLOW.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "Gross. This tree is sick all over.",
	BLOOM = "Ack! It stinks!",
}
GLOBAL.STRINGS.CHARACTERS.WILLOW.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "Gross. It smells like leprechaun butt.",
	BLOOM = "It's spreading junk everywhere.",
}
GLOBAL.STRINGS.CHARACTERS.WILLOW.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Gross. It's all mushroomy.",
	BLOOM = "Ew, I don't want to get too close.",
}
GLOBAL.STRINGS.CHARACTERS.WOLFGANG.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "Big mushtree is big.",
	BLOOM = "Woah! It's even bigger!",
}
GLOBAL.STRINGS.CHARACTERS.WOLFGANG.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "Mushy bush.",
	BLOOM = "It's having fun!",
}
GLOBAL.STRINGS.CHARACTERS.WOLFGANG.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "Mushy shrub.",
	BLOOM = "Even smell is strong!",
}
GLOBAL.STRINGS.CHARACTERS.WOODIE.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "I can't let that stand.",
	BLOOM = "Chop it down before it spreads!",
}
GLOBAL.STRINGS.CHARACTERS.WOODIE.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "Maybe I should chop it.",
	BLOOM = "I like the colour of this one.",
}
GLOBAL.STRINGS.CHARACTERS.WOODIE.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "It's made of wood.",
	BLOOM = "Well, I can't cut it down now...",
}
GLOBAL.STRINGS.CHARACTERS.WOODLEGS.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "Whut's thet 'shroom doin' way up thar?",
	BLOOM = "It'll make little 'shrooms.",
}
GLOBAL.STRINGS.CHARACTERS.WOODLEGS.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "'Shroom tree, now me's seen it all.",
	BLOOM = "It'll make little 'shrooms.",
}
GLOBAL.STRINGS.CHARACTERS.WOODLEGS.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "It glows!",
	BLOOM = "It'll make little 'shrooms.",
}
GLOBAL.STRINGS.CHARACTERS.WX78.DESCRIBE.MUSHTREE_TALL =
{
	GENERIC = "IT IS ADVANTAGEOUSLY BRIGHT",
	BLOOM = "ORGANICS ARE ALWAYS REPRODUCING THEMSELVES. WHY",
}
GLOBAL.STRINGS.CHARACTERS.WX78.DESCRIBE.MUSHTREE_MEDIUM =
{
	GENERIC = "SHINY RED",
	BLOOM = "IT'S POLLUTING THE AIR WITH REPRODUCTIVE SPEWINGS",
}
GLOBAL.STRINGS.CHARACTERS.WX78.DESCRIBE.MUSHTREE_SMALL =
{
	GENERIC = "SHINY GREEN",
	BLOOM = "IT KEEPS PRODUCING POWER AND FLUFF-FILTH",
}


-- Assets
table.insert(Assets, Asset("ANIM", "anim/mod_mushroom_tree_med.zip"))
table.insert(Assets, Asset("ANIM", "anim/mushroom_tree_med_bloom.zip"))
table.insert(Assets, Asset("ANIM", "anim/mod_mushroom_tree_tall.zip"))
table.insert(Assets, Asset("ANIM", "anim/mushroom_tree_tall_bloom.zip"))
table.insert(Assets, Asset("ANIM", "anim/mod_mushroom_tree_small.zip"))
table.insert(Assets, Asset("ANIM", "anim/mushroom_tree_small_bloom.zip"))

-- Prefabs
table.insert(PrefabFiles, "mushtree")

-- Init
AddPrefabPostInit("mushtree", function(inst)
	inst:DoPeriodicTask(5, function()
		print(GetSeasonManager().current_season)
		inst.onseasonchange(inst, GetSeasonManager().current_season == inst.season, false)
	end)
end)

AddClassPostConstruct("components/periodicspawner", function(self)
	function self:ForceNextSpawn(self)
		if self.task ~= nil then
			self.task:Cancel()
			self.task = nil
		end
		self.target_time = nil
		self:TrySpawn()
		self:Start()
	end
end)